@model dynamic

@{
    Layout = null; // Sin layout estándar para el PDF
}

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Reporte de Horarios</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" />
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .cover-page { text-align: center; margin-top: 200px; page-break-after: always; }
        .section-break { page-break-before: always; }
        h1, h2 { color: #2c3e50; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; font-size: 12px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>

    <!-- PORTADA -->
    <div class="cover-page">
        <h1>Sistema de Gestión de Horarios</h1>
        <h2>Reporte General</h2>
        <br />
        @if (Model.Centro != null)
        {
            <h3>@Model.Centro.Nombre</h3>
            <p>@Model.Centro.Dirección</p>
            <p>@Model.Centro.Teléfono</p>
        }
        <br />
        <p><strong>Fecha de Generación:</strong> @Model.FechaGeneracion.ToString("dd/MM/yyyy HH:mm")</p>
    </div>

    <!-- LISTADOS -->
    <div class="container">
        <h2>Listado de Docentes</h2>
        <table class="table">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Especialidad</th>
                    <th>Horas Máx.</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var docente in Model.Docentes)
                {
                    <tr>
                        <td>@docente.Nombre</td>
                        <td>@docente.Especialidad</td>
                        <td>@docente.HorasMaximas</td>
                    </tr>
                }
            </tbody>
        </table>

        <h2>Asignaturas</h2>
        <table class="table">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Horas Semanales</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var asign in Model.Asignaturas)
                {
                    <tr>
                        <td>@asign.Nombre</td>
                        <td>@asign.HorasSemanales</td>
                    </tr>
                }
            </tbody>
        </table>

        <div class="section-break"></div>

        <h2>Cursos y Grupos</h2>
        <div class="row">
            <div class="col-6">
                <h3>Cursos</h3>
                <ul>
                    @foreach (var curso in Model.Cursos)
                    {
                        <li>@curso.Nombre (@curso.Modalidad)</li>
                    }
                </ul>
            </div>
            <div class="col-6">
                <h3>Grupos</h3>
                <ul>
                    @foreach (var grupo in Model.Grupos)
                    {
                        <li>@grupo.Nombre - @grupo.NivelEducativo</li>
                    }
                </ul>
            </div>
        </div>

        <div class="section-break"></div>

        <h2>Horarios Asignados</h2>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Día</th>
                    <th>Hora</th>
                    <th>Docente</th>
                    <th>Asignatura</th>
                    <th>Aula</th>
                    <th>Grupo</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var horario in Model.Horarios)
                {
                    <tr>
                        <td>@horario.DiaSemana</td>
                        <td>@horario.HoraInicio.ToString(@"hh\:mm") - @horario.HoraFin.ToString(@"hh\:mm")</td>
                        <td>@horario.Docente.Nombre</td>
                        <td>@horario.Asignatura.Nombre</td>
                        <td>@(horario.Aula?.NombreNumero ?? "N/A")</td>
                        <td>@(horario.Grupo?.Nombre ?? "N/A")</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

</body>
</html>
